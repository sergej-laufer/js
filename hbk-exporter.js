var HBKExporter=function(e){"use strict";function t(e){return new Promise(t=>setTimeout(t,e))}const n=async()=>{const e=document.getElementById("hide-redeemed");console.log("Hiding redeemed keys."),e.checked||(e.click(),await t(250))},o=async()=>{console.log("Setting first page."),document.querySelector('.js-jump-to-page[data-index="0"]').click(),await t(100)},c=async()=>{let e=(()=>[...document.querySelectorAll(".unredeemed-keys-table tbody tr:not(.key-manager-choice-row)")].map(e=>({platform:e.querySelector(".platform :first-child").title.trim(),name:e.querySelector(".game-name h4").textContent.trim().replace(/®|™/g,""),bundle:e.querySelector(".game-name p").textContent.trim(),bundle_url:e.querySelector(".game-name a").href})))();return(()=>null!==document.querySelector(".js-jump-to-page.current + .js-jump-to-page"))()?(await(async()=>{const e=document.querySelector(".js-jump-to-page.current + .js-jump-to-page");null!==e&&(e.click(),await t(100))})(),e.concat(await c())):e};return e.run=function(){"/home/keys"===window.location.pathname?o().then(n).then(c).then(e=>JSON.stringify(e,null,2)).then(e=>(function(e,t){const n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e])),n.download=t,n.click(),setTimeout(()=>URL.revokeObjectURL(n.href),500)})(e,"humble-bundle-keys.json")):console.log("No eligible page detected.")},e}({});
